<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PracticeLoop - Slow Down & Loop YouTube Videos for Practice</title>
    <meta name="description" content="Free tool for musicians to slow down and loop sections of YouTube videos. Set AB loops, control speed from 0.25x to 2x, and master any song passage by passage.">
    <meta name="keywords" content="youtube looper, loop youtube video, slow down youtube, AB loop, youtube repeat section, music practice tool, slow down music for practice, youtube speed changer, loop section youtube, youtube video looper">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://teal-semifreddo-cad4ad.netlify.app/">
    <link rel="stylesheet" href="styles.css">

    <!-- Open Graph -->
    <meta property="og:title" content="PracticeLoop - Slow Down & Loop YouTube Videos for Practice">
    <meta property="og:description" content="Free music practice tool. Slow down YouTube videos, set AB loops on any section, and master difficult passages at your own pace.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://teal-semifreddo-cad4ad.netlify.app/">
    <meta property="og:site_name" content="PracticeLoop">
    <meta property="og:locale" content="en_GB">
    <meta property="og:image" content="https://teal-semifreddo-cad4ad.netlify.app/og-image.png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="PracticeLoop - Slow Down & Loop YouTube Videos">
    <meta name="twitter:description" content="Free tool for musicians. Slow down YouTube, set AB loops, master any passage. No download required.">
    <meta name="twitter:image" content="https://teal-semifreddo-cad4ad.netlify.app/og-image.png">

    <!-- PWA -->
    <meta name="theme-color" content="#667eea">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-title" content="PracticeLoop">
    <meta name="application-name" content="PracticeLoop">

    <!-- Preconnect (ytimg for thumbnails; youtube.com deferred until API needed) -->
    <link rel="preconnect" href="https://i.ytimg.com">

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="manifest" href="/site.webmanifest">

    <!-- Schema.org Structured Data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "PracticeLoop",
      "url": "https://teal-semifreddo-cad4ad.netlify.app/",
      "description": "A free browser-based tool for musicians to slow down and loop sections of YouTube videos for practice. Set AB loop points, adjust playback speed from 0.25x to 2x, and master difficult passages at your own pace.",
      "applicationCategory": "MultimediaApplication",
      "operatingSystem": "Web Browser",
      "isAccessibleForFree": true,
      "offers": { "@type": "Offer", "price": "0", "priceCurrency": "GBP" },
      "featureList": ["Slow down YouTube videos from 0.25x to 2x", "Set AB loop points on any section", "Save named loops for later", "Keyboard shortcuts", "No download required"],
      "author": { "@type": "Organization", "name": "PracticeLoop" }
    }
    </script>

    <!-- Heap Analytics -->
    <script type="text/javascript">
      window.heapReadyCb=window.heapReadyCb||[],window.heap=window.heap||[],heap.load=function(e,t){window.heap.envId=e,window.heap.clientConfig=t=t||{},window.heap.clientConfig.shouldFetchServerConfig=!1;var a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src="https://cdn.us.heap-api.com/config/"+e+"/heap_config.js";var r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(a,r);var n=["init","startTracking","stopTracking","track","resetIdentity","identify","getSessionId","getUserId","getIdentity","addUserProperties","addEventProperties","removeEventProperty","clearEventProperties","addAccountProperties","addAdapter","addTransformer","addTransformerFn","onReady","addPageviewProperties","removePageviewProperty","clearPageviewProperties","trackPageview"],i=function(e){return function(){var t=Array.prototype.slice.call(arguments,0);window.heapReadyCb.push({name:e,fn:function(){heap[e]&&heap[e].apply(heap,t)}})}};for(var p=0;p<n.length;p++)heap[n[p]]=i(n[p])};
      heap.load("3079155083");
    </script>
</head>
<body>
    <div class="container">
        <header role="banner">
            <div class="header-content">
                <h1>üéµ PracticeLoop</h1>
                <div class="header-actions">
                    <span id="accountBadge" class="account-badge free">Free (3 videos)</span>
                    <button id="shareReferralBtn" class="btn-share-referral" onclick="app.showReferralModal()">
                        Share & Earn
                    </button>
                    <a href="https://pay.tide.co/products/music-pract-dojo6MnC" target="_blank"
                       id="buyLicenseLink"
                       onclick="app.trackEvent('upgrade_link_clicked', {source: 'header'})"
                       class="buy-license-link">
                        Buy a Licence
                    </a>
                    <a href="#" id="licenseKeyLink" onclick="app.showLicenseKeyModal(); return false;" class="license-link">
                        Enter License Key
                    </a>
                </div>
            </div>
        </header>

        <main>
        <section class="search-section" id="searchSection" style="display: none;">
            <div class="input-group">
                <input
                    type="text"
                    id="searchInput"
                    placeholder="Search YouTube videos..."
                    aria-label="Search YouTube"
                >
                <button id="searchBtn" class="btn btn-secondary">Search</button>
            </div>
            <div id="searchResults" class="search-results"></div>
        </section>

        <!-- Welcome Banner (first-time users) -->
        <div id="welcomeBanner" class="welcome-banner">
            <div class="welcome-banner-content">
                <div class="welcome-banner-text">
                    <h2>Welcome to PracticeLoop</h2>
                    <p>Paste a YouTube URL above to start practicing</p>
                    <p class="welcome-subtitle">Slow down, loop sections, save your progress</p>
                    <div class="welcome-shortcuts">
                        <span class="shortcut-tag"><kbd>Space</kbd> Play/Pause</span>
                        <span class="shortcut-tag"><kbd>[</kbd> <kbd>]</kbd> Set Loop</span>
                        <span class="shortcut-tag"><kbd>L</kbd> Toggle Loop</span>
                        <span class="shortcut-tag"><kbd>&larr;</kbd> <kbd>&rarr;</kbd> Seek</span>
                    </div>
                </div>
                <button id="welcomeDismissBtn" class="btn-welcome-dismiss">Got it</button>
            </div>
        </div>

        <!-- Add Video Section -->
        <section class="add-video-section">
            <div class="input-group">
                <input
                    type="text"
                    id="videoUrlInput"
                    placeholder="Paste YouTube URL or search..."
                    aria-label="YouTube URL"
                >
                <button id="addVideoBtn" class="btn btn-primary">Add Video</button>
            </div>
        </section>

        <!-- Video Library -->
        <section class="video-library">
            <h2>Video Library</h2>
            <div id="videoList" class="video-list">
                <!-- Videos will be populated here -->
            </div>
        </section>

        <!-- Video Player Section -->
        <section class="player-section" id="playerSection" style="display: none;">
            <div class="video-container">
                <div id="player"></div>
            </div>

            <div class="video-info">
                <h3 id="currentVideoTitle">Select a video to start practicing</h3>
                <div class="shortcuts-help" id="shortcutsHelp">
                    <button class="btn-shortcuts-help" id="shortcutsHelpBtn" aria-label="Keyboard shortcuts">?</button>
                    <div class="shortcuts-tooltip" id="shortcutsTooltip">
                        <div class="shortcuts-tooltip-title">Keyboard Shortcuts</div>
                        <div class="shortcuts-tooltip-list">
                            <div class="shortcut-row"><kbd>Space</kbd><span>Play / Pause</span></div>
                            <div class="shortcut-row"><kbd>[</kbd><span>Set loop start</span></div>
                            <div class="shortcut-row"><kbd>]</kbd><span>Set loop end</span></div>
                            <div class="shortcut-row"><kbd>L</kbd><span>Toggle loop</span></div>
                            <div class="shortcut-row"><kbd>&larr;</kbd><span>Seek back 5s</span></div>
                            <div class="shortcut-row"><kbd>&rarr;</kbd><span>Seek forward 5s</span></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Playback Controls -->
            <div class="controls">
                <!-- Main Controls (Play/Pause, Skip to Start, Seek) -->
                <div class="control-group main-controls-row">
                    <button id="skipToStartBtn" class="btn btn-skip" aria-label="Skip to start">
                        <span class="icon">‚èÆ</span>
                        <span class="label">Start</span>
                    </button>
                    <button id="seekBackBtn" class="btn btn-seek" aria-label="Rewind 5 seconds">
                        <span class="icon">‚è™</span>
                        <span class="label">-5s</span>
                    </button>
                    <button id="playPauseBtn" class="btn btn-play-pause" aria-label="Play/Pause">
                        <span class="icon">‚ñ∂</span>
                    </button>
                    <button id="seekForwardBtn" class="btn btn-seek" aria-label="Forward 5 seconds">
                        <span class="icon">‚è©</span>
                        <span class="label">+5s</span>
                    </button>
                </div>

                <!-- Speed Control -->
                <div class="control-group speed-control">
                    <label for="speedSlider">Speed: <span id="speedDisplay">1.0x</span>
                        <span id="practiceTimer" class="practice-timer-chip">0:00</span>
                    </label>
                    <input
                        type="range"
                        id="speedSlider"
                        min="0.25"
                        max="2"
                        step="0.05"
                        value="1"
                        aria-label="Playback speed"
                    >
                    <div class="speed-presets">
                        <button class="btn btn-preset" data-speed="0.5">0.5x</button>
                        <button class="btn btn-preset" data-speed="0.75">0.75x</button>
                        <button class="btn btn-preset" data-speed="1.0">1.0x</button>
                        <button class="btn btn-preset" data-speed="1.25">1.25x</button>
                        <button class="btn btn-preset" data-speed="1.5">1.5x</button>
                    </div>
                </div>

                <!-- Timeline -->
                <div class="control-group timeline">
                    <div class="time-display">
                        <span id="currentTime">0:00</span>
                        <span id="duration">0:00</span>
                    </div>
                    <div class="timeline-container">
                        <div class="timeline-bar">
                            <div id="progressBar" class="progress-bar"></div>
                            <div id="loopOverlay" class="loop-overlay" style="display: none;"></div>
                        </div>
                        <input
                            type="range"
                            id="timelineSlider"
                            min="0"
                            max="100"
                            value="0"
                            aria-label="Video timeline"
                        >
                    </div>
                </div>

                <!-- Loop Controls -->
                <div class="control-group loop-controls">
                    <h4>Loop Section</h4>
                    <p class="loop-instructions">
                        Play your video, click "Set Start" at the beginning of the section you want to practice,
                        then click "Set End" where you want the loop to finish. Click "Enable Loop" to repeat automatically.
                    </p>
                    <div class="loop-buttons">
                        <button id="setLoopStartBtn" class="btn btn-loop">
                            Set Start
                            <span id="loopStartDisplay" class="loop-time">--:--</span>
                        </button>
                        <button id="setLoopEndBtn" class="btn btn-loop">
                            Set End
                            <span id="loopEndDisplay" class="loop-time">--:--</span>
                        </button>
                        <button id="toggleLoopBtn" class="btn btn-loop" disabled>
                            Enable Loop
                        </button>
                        <button id="clearLoopBtn" class="btn btn-loop-clear">
                            Clear Loop
                        </button>
                    </div>
                    <p class="keyboard-hints">Keyboard: Space = play/pause, [ = loop start, ] = loop end, L = toggle loop, arrows = seek</p>
                </div>

                <!-- Progressive Speed Training -->
                <div class="control-group progressive-section">
                    <div class="progressive-header">
                        <h4>Progressive Speed Training</h4>
                        <label class="toggle-switch">
                            <input type="checkbox" id="progressiveToggle">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    <p class="progressive-hint">Auto-increase speed after repeating a loop. Start slow, build up.</p>
                    <div id="progressiveControls" class="progressive-controls" style="display: none;">
                        <div class="progressive-setting">
                            <label for="progressiveReps">Reps before speed up</label>
                            <input type="number" id="progressiveReps" value="3" min="1" max="20" class="progressive-input">
                        </div>
                        <div class="progressive-setting">
                            <label for="progressiveStep">Speed increment</label>
                            <input type="number" id="progressiveStep" value="0.05" min="0.01" max="0.25" step="0.01" class="progressive-input">
                        </div>
                        <div class="progressive-setting">
                            <label for="progressiveTarget">Target speed</label>
                            <input type="number" id="progressiveTarget" value="1.0" min="0.25" max="2" step="0.05" class="progressive-input">
                        </div>
                        <div class="progressive-progress-bar">
                            <div id="progressiveProgress" class="progressive-progress-fill"></div>
                        </div>
                        <p class="progressive-status" id="progressiveStatus"></p>
                    </div>
                </div>

                <!-- Save Loop Section -->
                <div class="control-group save-loop-section" id="saveLoopSection" style="display:none;">
                    <h4>Save This Loop</h4>
                    <div class="save-loop-row">
                        <input type="text" id="loopNameInput" placeholder="Name this loop (e.g. 'Bridge - tricky bit')" class="loop-name-input">
                        <button id="saveLoopBtn" class="btn btn-save-loop" onclick="app.doSaveLoop()">Save Loop</button>
                    </div>
                    <div id="savedLoopsContainer" class="saved-loops-container">
                        <p class="no-loops-hint">No saved loops yet.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Share This Section (shown when a video is loaded) -->
        <section class="share-section" id="shareSection" style="display: none;">
            <div class="share-section-inner">
                <h4>Share This Practice Section</h4>
                <p>Send this link to a friend -- it loads the video, loop points, and speed automatically.</p>
                <div class="share-url-row">
                    <input type="text" id="shareUrlDisplay" readonly class="share-url-input" placeholder="Set a loop to generate share link">
                    <button id="copyShareUrlBtn" class="btn btn-primary btn-copy-share" onclick="app.copyShareUrl()">Copy Link</button>
                </div>
                <div class="share-social-buttons">
                    <button onclick="app.shareToTwitter()" class="btn-social btn-twitter" title="Share on Twitter">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
                        </svg>
                        Tweet
                    </button>
                    <button onclick="app.shareToReddit()" class="btn-social btn-reddit" title="Share on Reddit">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0zm5.01 4.744c.688 0 1.25.561 1.25 1.249a1.25 1.25 0 0 1-2.498.056l-2.597-.547-.8 3.747c1.824.07 3.48.632 4.674 1.488.308-.309.73-.491 1.207-.491.968 0 1.754.786 1.754 1.754 0 .716-.435 1.333-1.01 1.614a3.111 3.111 0 0 1 .042.52c0 2.694-3.13 4.87-7.004 4.87-3.874 0-7.004-2.176-7.004-4.87 0-.183.015-.366.043-.534A1.748 1.748 0 0 1 4.028 12c0-.968.786-1.754 1.754-1.754.463 0 .898.196 1.207.49 1.207-.883 2.878-1.43 4.744-1.487l.885-4.182a.342.342 0 0 1 .14-.197.35.35 0 0 1 .238-.042l2.906.617a1.214 1.214 0 0 1 1.108-.701zM9.25 12C8.561 12 8 12.562 8 13.25c0 .687.561 1.248 1.25 1.248.687 0 1.248-.561 1.248-1.249 0-.688-.561-1.249-1.249-1.249zm5.5 0c-.687 0-1.248.561-1.248 1.25 0 .687.561 1.248 1.249 1.248.688 0 1.249-.561 1.249-1.249 0-.687-.562-1.249-1.25-1.249zm-5.466 3.99a.327.327 0 0 0-.231.094.33.33 0 0 0 0 .463c.842.842 2.484.913 2.961.913.477 0 2.105-.056 2.961-.913a.361.361 0 0 0 .029-.463.33.33 0 0 0-.464 0c-.547.533-1.684.73-2.512.73-.828 0-1.979-.196-2.512-.73a.326.326 0 0 0-.232-.095z"/>
                        </svg>
                        Reddit
                    </button>
                    <button onclick="app.shareToFacebook()" class="btn-social btn-facebook" title="Share on Facebook">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M9.101 23.691v-7.98H6.627v-3.667h2.474v-1.58c0-4.085 1.848-5.978 5.858-5.978.401 0 .955.042 1.468.103a8.68 8.68 0 0 1 1.141.195v3.325a8.623 8.623 0 0 0-.653-.036 26.805 26.805 0 0 0-.733-.009c-.707 0-1.259.096-1.675.309a1.686 1.686 0 0 0-.679.622c-.258.42-.374.995-.374 1.752v1.297h3.919l-.386 2.103-.287 1.564h-3.246v8.245C19.396 23.238 24 18.179 24 12.044c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.628 3.874 10.35 9.101 11.647Z"/>
                        </svg>
                        Facebook
                    </button>
                </div>
            </div>
        </section>

        <!-- Metronome (collapsible, starts collapsed) -->
        <section class="metronome-section" id="metronomeSection" style="display: none;">
            <button class="metronome-toggle" id="metronomeToggle">
                <span class="metronome-toggle-text">Metronome</span>
                <span class="metronome-toggle-arrow" id="metronomeArrow">&#9660;</span>
            </button>
            <div class="metronome-body" id="metronomeBody">
                <div class="metronome-controls">
                    <div class="metronome-bpm-row">
                        <div class="metronome-bpm-group">
                            <label for="metronomeBpmInput" class="metronome-label">BPM</label>
                            <input type="number" id="metronomeBpmInput" class="metronome-bpm-input" min="20" max="300" value="120">
                        </div>
                        <div class="metronome-time-sig-group">
                            <label for="metronomeTimeSig" class="metronome-label">Time Sig</label>
                            <select id="metronomeTimeSig" class="metronome-time-sig-select">
                                <option value="4/4">4/4</option>
                                <option value="3/4">3/4</option>
                                <option value="6/8">6/8</option>
                            </select>
                        </div>
                        <button id="metronomeTapBtn" class="btn metronome-tap-btn">Tap Tempo</button>
                    </div>
                    <div class="metronome-action-row">
                        <button id="metronomeStartStopBtn" class="btn metronome-start-btn">Start</button>
                        <div class="metronome-beat-indicator" id="metronomeBeatIndicator">
                            <span class="metronome-beat-dot" id="metronomeBeatDot"></span>
                        </div>
                        <div class="metronome-volume-group">
                            <label for="metronomeVolume" class="metronome-label">Vol</label>
                            <input type="range" id="metronomeVolume" class="metronome-volume-slider" min="0" max="100" value="50">
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Session Stats (collapsible) -->
        <section class="session-stats-section" id="sessionStatsSection" style="display: none;">
            <button class="session-stats-toggle" id="sessionStatsToggle">
                <span class="session-stats-toggle-text">Session Stats</span>
                <span class="session-stats-toggle-arrow" id="sessionStatsArrow">&#9660;</span>
            </button>
            <div class="session-stats-body" id="sessionStatsBody">
                <div class="session-stats-grid">
                    <div class="stat-card">
                        <span class="stat-label">Session Time</span>
                        <span class="stat-value" id="statSessionTime">0:00</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-label">Today Total</span>
                        <span class="stat-value" id="statTodayTotal">0:00</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-label">Loop Reps</span>
                        <span class="stat-value" id="statLoopReps">0</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-label">Speed</span>
                        <span class="stat-value" id="statCurrentSpeed">1.0x</span>
                    </div>
                </div>
                <div class="streak-indicator" id="streakIndicator" style="display: none;">
                    <span class="streak-flame">&#9733;</span>
                    <span class="streak-text" id="streakText">3 day streak!</span>
                </div>
            </div>
        </section>

        <!-- Try It - Demo Links -->
        <section class="demo-section" id="demoSection">
            <h2>Try It Out</h2>
            <p class="demo-subtitle">Click a link to instantly load a practice section with loop and speed pre-configured.</p>
            <div class="demo-links">
                <a href="?v=QkF3oxziUI4&start=336&end=358&speed=0.5" class="demo-card">
                    <div class="demo-icon">&#127928;</div>
                    <div class="demo-info">
                        <h3>Stairway to Heaven Solo</h3>
                        <p>Led Zeppelin -- iconic solo at 0.5x speed</p>
                        <span class="demo-tag">Guitar</span>
                    </div>
                </a>
                <a href="?v=Zi_XLOBDo_Y&start=0&end=16&speed=0.65" class="demo-card">
                    <div class="demo-icon">&#127925;</div>
                    <div class="demo-info">
                        <h3>Billie Jean Bass Line</h3>
                        <p>Michael Jackson -- groove at 0.65x speed</p>
                        <span class="demo-tag">Bass</span>
                    </div>
                </a>
                <a href="?v=WNcsUNKlAKw&start=0&end=30&speed=0.6" class="demo-card">
                    <div class="demo-icon">&#127929;</div>
                    <div class="demo-info">
                        <h3>Clair de Lune Opening</h3>
                        <p>Debussy -- delicate opening at 0.6x speed</p>
                        <span class="demo-tag">Piano</span>
                    </div>
                </a>
                <a href="?v=fJ9rUzIMcZQ&start=170&end=195&speed=0.5" class="demo-card">
                    <div class="demo-icon">&#129345;</div>
                    <div class="demo-info">
                        <h3>Bohemian Rhapsody Breakdown</h3>
                        <p>Queen -- operatic section at 0.5x speed</p>
                        <span class="demo-tag">Multi</span>
                    </div>
                </a>
            </div>
        </section>

        </main>

        <!-- Footer with Version -->
        <footer class="app-footer">
            <p class="version">PracticeLoop v0.7.1</p>
            <nav class="instrument-links">
                <a href="/guitar">Guitar</a>
                <a href="/bass">Bass</a>
                <a href="/piano">Piano</a>
                <a href="/drums">Drums</a>
                <a href="/violin">Violin</a>
            </nav>
        </footer>
    </div>

    <!-- Confetti Canvas -->
    <canvas id="confettiCanvas" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 9999;"></canvas>

    <!-- YouTube IFrame API: loaded lazily by app.js when needed -->
    <!-- confetti.js: loaded lazily by app.js on first video add -->
    <script src="app.js"></script>

    <!-- Service Worker Registration -->
    <script>
      if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('/sw.js');
      }
    </script>
</body>
</html>
